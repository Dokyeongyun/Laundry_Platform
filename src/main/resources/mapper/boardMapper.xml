<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coders.laundry.repository.BoardRepository">
    <select id="selectAllCategory" resultType="CategoryEntity">
        SELECT category_name
        FROM category;
    </select>

    <select id="selectHotPost" resultType="PostEntity">
        SELECT post_id, category_id, writer, title, contents,
        create_date, like_num
        FROM post;
        WHERE post_id IN
        (SELECT post_id
            FROM post
            WHERE create_date BETWEEN DATE_ADD(NOW(), INTERVAL -1 DAY) AND NOW()
            GROUP BY category_id
            HAVING count(*) >= 1
            ORDER BY like_num DESC
            LIMIT 1)
        ORDER BY category_id ASC
    </select>
</mapper>